<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>유진투자선물</title>
</head>
<body>
    <header>
        <h1 class="logo">유진투자선물</h1>
        <button type="button">앱 다운로드 <i class="ico ico-download"></i></button>
    </header>
    <main>
        
        <section class="section01">
            <div id="containers" class="program_detail"></div>
            <div class="container">asdfasdfasd</div>
        </section>
        <section class="section02">

        </section>
        <section class="section03">

        </section>
        <section class="section04">

        </section>
        <section class="section05">

        </section>
    </main>
    <footer>

    </footer>

    <script src="js/script.js"></script>

    <!-- 배경 효과 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/89/three.min.js"></script>

    <script id="vertexShader" type="x-shader/x-vertex">
        void main() {
            gl_Position = vec4( position, 1.0 );
        }
    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">
        #ifdef GL_ES
        precision mediump float;
        #endif
        uniform float time;
        uniform vec2 resolution;

        const int   complexity      =3;    // More points of color.
        const float fluid_speed     = 180.0;  // speed
        const float color_intensity = 1.3;  //intensity

        float random (in vec2 st) {
            return fract(sin(dot(st.xy,
                                 vec2(12.9898,78.233)))
                         * 43758.5453123);
        }

        void main(){
            vec2 uv = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);

            float r = sqrt( dot( uv, uv ) );
            for(int i=1;i<complexity;i++){
                vec2 newUv = uv + time*0.013; //패턴이동

                newUv.x+= 1.5/float(i) * 
                          sin(float(i) * uv.y + time/fluid_speed) 
                          + 1.0;
                
                newUv.y+= 1.4/float(i) * 
                          cos(float(i) * uv.x + time/fluid_speed) 
                          - 0.9;
                uv=newUv;
            }

            //vec3 col = vec3(color_intensity*cos(uv.x)*0.9,
            //                color_intensity*sin(uv.x)*sqrt(cos(time*0.01)),
            //                color_intensity);

            // 기본 색상 계산
            vec3 baseColor = vec3(
                color_intensity * cos(uv.x) * 0.9,
                color_intensity * sin(uv.x) * sqrt(cos(time * 0.01)),
                color_intensity
            );

            // 색상 범위 지정 (68,91,255) -> (0,172,255)
            vec3 minColor = vec3(68.0 / 255.0, 91.0 / 255.0, 1.0);
            vec3 maxColor = vec3(0.05, 172.0 / 255.0, 1.0);
            
            // 색상을 minColor ~ maxColor 범위로 보정
            vec3 col = mix(minColor, maxColor, smoothstep(0.0, 1.0, baseColor));

            gl_FragColor=vec4(col, 1.0);
        }
    </script>
    <script>
        var container;
        var camera, scene, renderer;
        var uniforms;

        init();
        animate();

        function init() {
            container = document.getElementById( 'containers' );

            camera = new THREE.Camera();
            camera.position.z = 1;

            scene = new THREE.Scene();

            var geometry = new THREE.PlaneBufferGeometry( 2, 2 );

            uniforms = {
                time: { type: "f", value: 4.0 },
                resolution: { type: "v2", value: new THREE.Vector2() }
            };

            var material = new THREE.ShaderMaterial( {
                uniforms: uniforms,
                vertexShader: document.getElementById( 'vertexShader' ).textContent,
                fragmentShader: document.getElementById( 'fragmentShader' ).textContent
            } );

            var mesh = new THREE.Mesh( geometry, material );
            scene.add( mesh );

            renderer = new THREE.WebGLRenderer();
            renderer.setPixelRatio( window.devicePixelRatio );

            container.appendChild( renderer.domElement );

            onWindowResize();
            window.addEventListener( 'resize', onWindowResize, false );
        }

        function onWindowResize( event ) {
            renderer.setSize( window.innerWidth, window.innerHeight );
            uniforms.resolution.value.x = renderer.domElement.width;
            uniforms.resolution.value.y = renderer.domElement.height;
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() {
            uniforms.time.value += 1.2;
            renderer.render( scene, camera );
        }
    </script>
    <!-- //배경 효과 끝-->
</body>
</html>